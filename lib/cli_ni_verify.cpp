#include <string>
#include <iostream>
#include "cryptopp/integer.h"
#include "cryptopp/modarith.h"
#include "proofs.hpp"

// make cli_ni && ./cli_ni_verify 44.0 21.0 38000.0 25410218930077552450300639890403984708793825974956822534326114491717207714622.124330525803915809104213293634871071911088519356971134566501559021439406097984533562586.124330015947872977098123378352531670955135337408852947057857407767952129792211739672156.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330336878938063977610825649613486757462209474875010762526016306778160180545175348016.124330805443375134607678009193413065806940239633025988966333549280329387445855432977696.124330808746703595517759827732496251559458251776223365710720478742724271369092435878556.124330809026216003748612904685803290353902083572955451435245526620311530777981720739398.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.17191.10057.4327.1443999994.
// make cli_ni && ./cli_ni_verify 50.428938 30.559123 1000 96772817340011636603840638511561793146665882550096595592726336314909314978731.124330798747755205157600445425756889288002171006087496499780265801571888557836641159047.124330805328306784278391734486920308074204104979367509906348766106962757971670059712755.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330713007039041907290414422951168044253443060115557114196570646037913548183570003381.124330806102489322998484827317645416166698450152694570307121530848773448490944579542603.124330808715355391178799015621342655978866865112673399159729611852384528993496083968340.124330808908901025858822288829023933001990451406005164259922803037837201623314713925802.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.124330809102446660538845562036705210025114037699336929360115994223289874253133343883264.2445.30.12638.1000000.
int main(int argc, char **argv) {

  if(argc != 5) {
       std::cerr << "Wrong argument to cli_ni_verify. Expected args: xl yl d proof (coordinates are in decimal degrees)" << std::endl;
       return 1;
  }

  double xl = std::stod(argv[1]),
          yl = std::stod(argv[2]),
          zl = 0.0,
          d = std::stod(argv[3]);

  std::string proof = argv[4];
  bool ok;

  std::cout.precision(10);

  std::cout << "xl: " << xl << std::endl;
  std::cout << "yl: " << yl << std::endl;
  std::cout << "d: " << d << std::endl;
  std::cout << "proof_string_value: " << proof << std::endl;

  ok = ni_proof_verify(proof, xl, yl, zl, d);

  std::cout << "verification_result_int: " << ok << std::endl;
  std::cout << "verification_result_bool: " << (ok == 1 ?  "true" : "false")<< std::endl << std::flush;

  return 0;
}